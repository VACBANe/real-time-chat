(this["webpackJsonpreal-time-chat"]=this["webpackJsonpreal-time-chat"]||[]).push([[0],{30:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return w}));var n=a(2),r=a(35),c=a.n(r),s=a(15),i=a(17),o=a(24),l=(a(30),a(7)),j=a(20),d=a.n(j),b=a(23),u=a(16),h=a(5),m=function(){var e=Object(n.useContext)(w).auth,t=function(){var t=Object(b.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new u.a.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(a);case 3:n=t.sent,console.log(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:{height:"80vh"},children:Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"btn btn-primary",onClick:t,children:"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Google"})})})})},x=a(36),O=function(){return Object(h.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"80vh"},children:Object(h.jsx)("div",{className:"lds-hourglass"})})},p=function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(w),a=t.auth,r=t.firestore,c=Object(i.a)(a),o=Object(s.a)(c,1)[0],l=Object(n.useState)(""),j=Object(s.a)(l,2),m=j[0],p=j[1],f=Object(x.a)(r.collection("messages").orderBy("createdAt")),v=Object(s.a)(f,2),g=v[0],y=v[1];Object(n.useEffect)((function(){if(e&&e.current){var t=e.current;t.scroll({top:t.scrollHeight,behavior:"smooth"})}}),[e,g]);var N=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.collection("messages").add({uid:o.uid,displayName:o.displayName,photoURL:o.photoURL,text:m,createdAt:u.a.firestore.FieldValue.serverTimestamp()}),p("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y?Object(h.jsx)(O,{}):Object(h.jsx)("div",{className:"container pt-4",children:Object(h.jsxs)("div",{className:"row d-flex justify-content-center",children:[Object(h.jsx)("div",{className:"border border-2 border-primary rounded-3 pt-3",ref:e,style:{width:"80%",height:"70vh",overflowY:"auto"},children:g.map((function(e){return Object(h.jsxs)("div",{className:"border border-2 border-primary rounded p-3 mb-3",style:{marginLeft:o.uid===e.uid?"auto":"10px",width:"fit-content",wordWrap:"break-word",maxWidth:"40%",minWidth:"20%"},children:[Object(h.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(h.jsx)("img",{src:e.photoURL,className:"rounded-3",alt:"avatar",style:{left:0,width:"50px",marginRight:"20px"}}),Object(h.jsx)("div",{children:e.displayName})]}),Object(h.jsx)("div",{children:e.text})]})}))}),Object(h.jsxs)("div",{className:"d-flex pt-4",style:{width:"82%",height:"13vh"},children:[Object(h.jsx)("textarea",{className:"form-control",value:m,onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:N,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})})},f="/login",v="/chat",g=function(){var e=Object(n.useContext)(w).auth,t=Object(i.a)(e);return Object(s.a)(t,1)[0]?Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:v,component:p,exact:!0}),Object(h.jsx)(l.a,{to:v})]}):Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:f,component:m,exact:!0}),Object(h.jsx)(l.a,{to:f})]})},y=function(){var e=Object(n.useContext)(w).auth,t=Object(i.a)(e),a=Object(s.a)(t,1)[0];return Object(h.jsx)("nav",{className:"navbar position-relative navbar-dark bg-primary",children:Object(h.jsx)("div",{className:"container justify-content-end",children:a?Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.signOut()},children:"\u0412\u044b\u0439\u0442\u0438"}):Object(h.jsx)(o.b,{to:f,children:Object(h.jsx)("button",{className:"btn btn-outline-light",children:"\u041b\u043e\u0433\u0438\u043d"})})})})};var N=function(){var e=Object(n.useContext)(w).auth,t=Object(i.a)(e),a=Object(s.a)(t,2);return a[0],a[1]?Object(h.jsx)(O,{}):Object(h.jsxs)(o.a,{children:[Object(h.jsx)(y,{}),Object(h.jsx)(g,{})]})};a(52),a(53);u.a.initializeApp({apiKey:"AIzaSyBeRXnGO53qMH6Btd7FIB27pkqC_UYCvVA",authDomain:"real-time-chat-39313.firebaseapp.com",projectId:"real-time-chat-39313",storageBucket:"real-time-chat-39313.appspot.com",messagingSenderId:"152608046314",appId:"1:152608046314:web:97ae6d3262563563b9ab93"});var w=Object(n.createContext)(null),C=u.a.auth(),k=u.a.firestore();c.a.render(Object(h.jsx)(w.Provider,{value:{firebase:u.a,auth:C,firestore:k},children:Object(h.jsx)(N,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.5b8ca4eb.chunk.js.map